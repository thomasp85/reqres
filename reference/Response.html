<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>HTTP Response handling — Response • reqres</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/simplex/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="HTTP Response handling — Response"><meta property="og:description" content="HTTP Response handling
HTTP Response handling"><meta property="og:image" content="https://reqres.data-imaginist.com/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">reqres</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.2.5.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>

  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    News

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li class="dropdown-header">Release notes</li>
    <li>
      <a href="https://www.data-imaginist.com/2017/introducing-reqres/" class="external-link">Version 0.2.0</a>
    </li>
    <li class="divider">
    <li>
      <a href="../news/index.html">Change log</a>
    </li>
  </ul></li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://fiery.data-imaginist.com" class="external-link">fiery</a>
</li>
<li>
  <a href="https://routr.data-imaginist.com" class="external-link">routr</a>
</li>
<li>
  <a href="https://github.com/thomasp85/reqres" class="external-link">
    <span class="fa fa-github fa-lg"></span>

  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>HTTP Response handling</h1>
    <small class="dont-index">Source: <a href="https://github.com/thomasp85/reqres/blob/main/R/response.R" class="external-link"><code>R/response.R</code></a></small>
    <div class="hidden name"><code>Response.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>HTTP Response handling</p>
<p>HTTP Response handling</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="co"># S3 method for class 'Response'</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">as.list</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">is.Response</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>A <code>Response</code> object</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Ignored</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>A rook-compliant list-response (in case of <code><a href="https://rdrr.io/r/base/list.html" class="external-link">as.list()</a></code>) or a logical
indicating whether the object is a <code>Response</code> (in case of <code>is.Response()</code>)</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>This class handles all functionality involved in crafting a http response.
Much of the functionality is inspired by the Request class in Express.js, so
<a href="https://expressjs.com/en/4x/api.html#res" class="external-link">the documentation</a> for this will
complement this document. As <code>reqres</code> is build on top of the
<a href="https://github.com/jeffreyhorner/Rook/blob/a5e45f751/README.md" class="external-link">Rook specifications</a>
the <code>Response</code> object can be converted to a compliant list object to be
passed on to e.g. the <code>httpuv</code> handler.</p>
<p>A <code>Response</code> object is always created
as a response to a <code>Request</code> object and contains a reference to the
originating <code>Request</code> object. A <code>Response</code> is always initialized with a
404 Not Found code, an empty string as body and the <code>Content-Type</code> header set
to <code>text/plain</code>. As the <code>Content-Type</code> header is required for <code>httpuv</code> to
function, it will be inferred if missing when converting to a list. If the
body is a raw vector it will be set to <code>application/octet-stream</code> and
otherwise it will be set to <code>text/plain</code>. It is always advised to consciously
set the <code>Content-Type</code> header though. The only exception is when attaching a
standard file where the type is inferred from the file extension
automatically. Unless the body is a raw vector it will automatically be
converted to a character vector and collapsed to a single string with <code>"\n"</code>
separating the individual elements before the <code>Response</code> object is converted
to a list (that is, the body can exist as any type of object up until the
moment where the <code>Response</code> object is converted to a list). To facilitate
communication between different middleware the <code>Response</code> object contains
a data store where information can be stored during the lifetime of the
response.</p>
    </div>
    <div id="initialization">
    <h2>Initialization</h2>


<p>A new 'Response'-object is initialized using the <code>new()</code> method on the
generator:</p>
<p><strong>Usage</strong></p><table class="table table"><tr><td><code>res &lt;- Response$new(request)</code></td></tr></table><p>But often it will be provided by the request using the <code>respond()</code> method,
which will provide the response, creating one if it doesn't exist</p>
<p><strong>Usage</strong></p><table class="table table"><tr><td><code>res &lt;- request$respond()</code></td></tr></table><p><strong>Arguments</strong></p><table class="table table"><tr><td><code>request</code></td><td></td><td>The <code>Request</code> object that the <code>Response</code> is responding to</td></tr></table></div>
    <div id="fields">
    <h2>Fields</h2>


<p>The following fields are accessible in a <code>Response</code> object:</p>
<dl><dt><code>status</code></dt>
<dd><p>Gets or sets the status code of the response. Is initialised
with <code>404L</code></p></dd>

<dt><code>body</code></dt>
<dd><p>Set or get he body of the response. If it is a character
vector with a single element named <code>'file'</code> it will be interpreted as the
location of a file. It is better to use the <code>file</code> field for creating a
response referencing a file as it will automatically set the correct
headers.</p></dd>

<dt><code>file</code></dt>
<dd><p>Set or get the location of a file that should be used as the
body of the response. If the body is not referencing a file (but contains
something else) it will return <code>NULL</code>. The <code>Content-Type</code> header will
automatically be inferred from the file extension, if known. If unknown it
will defaults to <code>application/octet-stream</code>. If the file has no extension it
will be <code>text/plain</code>. Existence of the file will be checked.</p></dd>

<dt><code>type</code></dt>
<dd><p>Get or sets the <code>Content-Type</code> header of the response based on
a file extension or mime-type.</p></dd>

<dt><code>request</code></dt>
<dd><p>Get the original <code>Request</code> object that the object is
responding to.</p></dd>


</dl></div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="Request.html">Request</a></code> for handling http requests</p></div>
    </div>
    <div id="active-bindings">
    <h2>Active bindings</h2>
    <p></p><div class="r6-active-bindings"><dl><dt><code>status</code></dt>
<dd><p>Gets or sets the status code of the response. Is
initialised with <code>404L</code></p></dd>


<dt><code>body</code></dt>
<dd><p>Set or get he body of the response. If it is a character
vector with a single element named <code>'file'</code> it will be interpreted as the
location of a file. It is better to use the <code>file</code> field for creating a
response referencing a file as it will automatically set the correct
headers.</p></dd>


<dt><code>file</code></dt>
<dd><p>Set or get the location of a file that should be used as the
body of the response. If the body is not referencing a file (but contains
something else) it will return <code>NULL</code>. The <code>Content-Type</code> header will
automatically be inferred from the file extension, if known. If unknown
it will defaults to <code>application/octet-stream</code>. If the file has no
extension it will be <code>text/plain</code>. Existence of the file will be checked.</p></dd>


<dt><code>type</code></dt>
<dd><p>Get or sets the <code>Content-Type</code> header of the response based
on a file extension or mime-type.</p></dd>


<dt><code>request</code></dt>
<dd><p>Get the original <code>Request</code> object that the object is
responding to.</p></dd>


</dl><p></p></div>
    </div>
    <div id="methods">
    <h2>Methods</h2>

<div class="section">
<h3 id="public-methods">Public methods<a class="anchor" aria-label="anchor" href="#public-methods"></a></h3>

<ul><li><p><a href="#method-Response-new"><code>Response$new()</code></a></p></li>
<li><p><a href="#method-Response-print"><code>Response$print()</code></a></p></li>
<li><p><a href="#method-Response-set_header"><code>Response$set_header()</code></a></p></li>
<li><p><a href="#method-Response-get_header"><code>Response$get_header()</code></a></p></li>
<li><p><a href="#method-Response-remove_header"><code>Response$remove_header()</code></a></p></li>
<li><p><a href="#method-Response-has_header"><code>Response$has_header()</code></a></p></li>
<li><p><a href="#method-Response-append_header"><code>Response$append_header()</code></a></p></li>
<li><p><a href="#method-Response-set_data"><code>Response$set_data()</code></a></p></li>
<li><p><a href="#method-Response-get_data"><code>Response$get_data()</code></a></p></li>
<li><p><a href="#method-Response-remove_data"><code>Response$remove_data()</code></a></p></li>
<li><p><a href="#method-Response-has_data"><code>Response$has_data()</code></a></p></li>
<li><p><a href="#method-Response-timestamp"><code>Response$timestamp()</code></a></p></li>
<li><p><a href="#method-Response-attach"><code>Response$attach()</code></a></p></li>
<li><p><a href="#method-Response-status_with_text"><code>Response$status_with_text()</code></a></p></li>
<li><p><a href="#method-Response-set_cookie"><code>Response$set_cookie()</code></a></p></li>
<li><p><a href="#method-Response-remove_cookie"><code>Response$remove_cookie()</code></a></p></li>
<li><p><a href="#method-Response-has_cookie"><code>Response$has_cookie()</code></a></p></li>
<li><p><a href="#method-Response-set_links"><code>Response$set_links()</code></a></p></li>
<li><p><a href="#method-Response-format"><code>Response$format()</code></a></p></li>
<li><p><a href="#method-Response-compress"><code>Response$compress()</code></a></p></li>
<li><p><a href="#method-Response-content_length"><code>Response$content_length()</code></a></p></li>
<li><p><a href="#method-Response-as_list"><code>Response$as_list()</code></a></p></li>
<li><p><a href="#method-Response-as_message"><code>Response$as_message()</code></a></p></li>
<li><p><a href="#method-Response-clone"><code>Response$clone()</code></a></p></li>
</ul></div><p></p><hr><a id="method-Response-new"></a><div class="section">
<h3 id="method-new-">Method <code>new()</code><a class="anchor" aria-label="anchor" href="#method-new-"></a></h3>
<p>Create a new response from a Request object</p><div class="section">
<h4 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va"><a href="../reference/Response.html">Response</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="va">request</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h4>
<p></p><div class="arguments"><dl><dt><code>request</code></dt>
<dd><p>The <code>Request</code> object that the <code>Response</code> is responding to</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-Response-print"></a><div class="section">
<h3 id="method-print-">Method <code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code><a class="anchor" aria-label="anchor" href="#method-print-"></a></h3>
<p>Pretty printing of the object</p><div class="section">
<h4 id="usage-1">Usage<a class="anchor" aria-label="anchor" href="#usage-1"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">Response</span><span class="op">$</span><span class="fu">print</span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-1">Arguments<a class="anchor" aria-label="anchor" href="#arguments-1"></a></h4>
<p></p><div class="arguments"><dl><dt><code>...</code></dt>
<dd><p>ignored</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-Response-set_header"></a><div class="section">
<h3 id="method-set-header-">Method <code>set_header()</code><a class="anchor" aria-label="anchor" href="#method-set-header-"></a></h3>
<p>Sets the header given by <code>name</code>. <code>value</code> will be converted
to character. A header will be added for each element in <code>value</code>. Use
<code>append_header()</code> for setting headers without overwriting existing ones.</p><div class="section">
<h4 id="usage-2">Usage<a class="anchor" aria-label="anchor" href="#usage-2"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">Response</span><span class="op">$</span><span class="fu">set_header</span><span class="op">(</span><span class="va">name</span>, <span class="va">value</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-2">Arguments<a class="anchor" aria-label="anchor" href="#arguments-2"></a></h4>
<p></p><div class="arguments"><dl><dt><code>name</code></dt>
<dd><p>The name of the header to set</p></dd>


<dt><code>value</code></dt>
<dd><p>The value to assign to the header</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-Response-get_header"></a><div class="section">
<h3 id="method-get-header-">Method <code>get_header()</code><a class="anchor" aria-label="anchor" href="#method-get-header-"></a></h3>
<p>Returns the header(s) given by <code>name</code></p><div class="section">
<h4 id="usage-3">Usage<a class="anchor" aria-label="anchor" href="#usage-3"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">Response</span><span class="op">$</span><span class="fu">get_header</span><span class="op">(</span><span class="va">name</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-3">Arguments<a class="anchor" aria-label="anchor" href="#arguments-3"></a></h4>
<p></p><div class="arguments"><dl><dt><code>name</code></dt>
<dd><p>The name of the header to retrieve the value for</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-Response-remove_header"></a><div class="section">
<h3 id="method-remove-header-">Method <code>remove_header()</code><a class="anchor" aria-label="anchor" href="#method-remove-header-"></a></h3>
<p>Removes all headers given by <code>name</code></p><div class="section">
<h4 id="usage-4">Usage<a class="anchor" aria-label="anchor" href="#usage-4"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">Response</span><span class="op">$</span><span class="fu">remove_header</span><span class="op">(</span><span class="va">name</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-4">Arguments<a class="anchor" aria-label="anchor" href="#arguments-4"></a></h4>
<p></p><div class="arguments"><dl><dt><code>name</code></dt>
<dd><p>The name of the header to remove</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-Response-has_header"></a><div class="section">
<h3 id="method-has-header-">Method <code>has_header()</code><a class="anchor" aria-label="anchor" href="#method-has-header-"></a></h3>
<p>Test for the existence of any header given by <code>name</code></p><div class="section">
<h4 id="usage-5">Usage<a class="anchor" aria-label="anchor" href="#usage-5"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">Response</span><span class="op">$</span><span class="fu">has_header</span><span class="op">(</span><span class="va">name</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-5">Arguments<a class="anchor" aria-label="anchor" href="#arguments-5"></a></h4>
<p></p><div class="arguments"><dl><dt><code>name</code></dt>
<dd><p>The name of the header to look for</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-Response-append_header"></a><div class="section">
<h3 id="method-append-header-">Method <code>append_header()</code><a class="anchor" aria-label="anchor" href="#method-append-header-"></a></h3>
<p>Adds an additional header given by <code>name</code> with the value
given by <code>value</code>. If the header does not exist yet it will be created.</p><div class="section">
<h4 id="usage-6">Usage<a class="anchor" aria-label="anchor" href="#usage-6"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">Response</span><span class="op">$</span><span class="fu">append_header</span><span class="op">(</span><span class="va">name</span>, <span class="va">value</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-6">Arguments<a class="anchor" aria-label="anchor" href="#arguments-6"></a></h4>
<p></p><div class="arguments"><dl><dt><code>name</code></dt>
<dd><p>The name of the header to append to</p></dd>


<dt><code>value</code></dt>
<dd><p>The value to assign to the header</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-Response-set_data"></a><div class="section">
<h3 id="method-set-data-">Method <code>set_data()</code><a class="anchor" aria-label="anchor" href="#method-set-data-"></a></h3>
<p>Adds <code>value</code> to the internal data store and stores it with
<code>key</code></p><div class="section">
<h4 id="usage-7">Usage<a class="anchor" aria-label="anchor" href="#usage-7"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">Response</span><span class="op">$</span><span class="fu">set_data</span><span class="op">(</span><span class="va">key</span>, <span class="va">value</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-7">Arguments<a class="anchor" aria-label="anchor" href="#arguments-7"></a></h4>
<p></p><div class="arguments"><dl><dt><code>key</code></dt>
<dd><p>The identifier of the data you set</p></dd>


<dt><code>value</code></dt>
<dd><p>An R object</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-Response-get_data"></a><div class="section">
<h3 id="method-get-data-">Method <code>get_data()</code><a class="anchor" aria-label="anchor" href="#method-get-data-"></a></h3>
<p>Retrieves the data stored under <code>key</code> in the internal data
store.</p><div class="section">
<h4 id="usage-8">Usage<a class="anchor" aria-label="anchor" href="#usage-8"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">Response</span><span class="op">$</span><span class="fu">get_data</span><span class="op">(</span><span class="va">key</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-8">Arguments<a class="anchor" aria-label="anchor" href="#arguments-8"></a></h4>
<p></p><div class="arguments"><dl><dt><code>key</code></dt>
<dd><p>The identifier of the data you wish to retrieve</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-Response-remove_data"></a><div class="section">
<h3 id="method-remove-data-">Method <code>remove_data()</code><a class="anchor" aria-label="anchor" href="#method-remove-data-"></a></h3>
<p>Removes the data stored under <code>key</code> in the internal data
store.</p><div class="section">
<h4 id="usage-9">Usage<a class="anchor" aria-label="anchor" href="#usage-9"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">Response</span><span class="op">$</span><span class="fu">remove_data</span><span class="op">(</span><span class="va">key</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-9">Arguments<a class="anchor" aria-label="anchor" href="#arguments-9"></a></h4>
<p></p><div class="arguments"><dl><dt><code>key</code></dt>
<dd><p>The identifier of the data you wish to remove</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-Response-has_data"></a><div class="section">
<h3 id="method-has-data-">Method <code>has_data()</code><a class="anchor" aria-label="anchor" href="#method-has-data-"></a></h3>
<p>Queries whether the data store has an entry given by <code>key</code></p><div class="section">
<h4 id="usage-10">Usage<a class="anchor" aria-label="anchor" href="#usage-10"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">Response</span><span class="op">$</span><span class="fu">has_data</span><span class="op">(</span><span class="va">key</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-10">Arguments<a class="anchor" aria-label="anchor" href="#arguments-10"></a></h4>
<p></p><div class="arguments"><dl><dt><code>key</code></dt>
<dd><p>The identifier of the data you wish to look for</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-Response-timestamp"></a><div class="section">
<h3 id="method-timestamp-">Method <code><a href="https://rdrr.io/r/utils/savehistory.html" class="external-link">timestamp()</a></code><a class="anchor" aria-label="anchor" href="#method-timestamp-"></a></h3>
<p>Set the <code>Date</code> header to the current time</p><div class="section">
<h4 id="usage-11">Usage<a class="anchor" aria-label="anchor" href="#usage-11"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">Response</span><span class="op">$</span><span class="fu">timestamp</span><span class="op">(</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-Response-attach"></a><div class="section">
<h3 id="method-attach-">Method <code><a href="https://rdrr.io/r/base/attach.html" class="external-link">attach()</a></code><a class="anchor" aria-label="anchor" href="#method-attach-"></a></h3>
<p>Sets the body to the file given by <code>file</code> and marks the
response as a download by setting the <code>Content-Disposition</code> to
<code>attachment; filename=&lt;filename&gt;</code>. Use the <code>type</code> argument to overwrite
the automatic type inference from the file extension.</p><div class="section">
<h4 id="usage-12">Usage<a class="anchor" aria-label="anchor" href="#usage-12"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">Response</span><span class="op">$</span><span class="kw">attach</span><span class="op">(</span><span class="va">file</span>, filename <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/basename.html" class="external-link">basename</a></span><span class="op">(</span><span class="va">file</span><span class="op">)</span>, type <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-11">Arguments<a class="anchor" aria-label="anchor" href="#arguments-11"></a></h4>
<p></p><div class="arguments"><dl><dt><code>file</code></dt>
<dd><p>The path to a file</p></dd>


<dt><code>filename</code></dt>
<dd><p>The name of the file as it will appear to the client</p></dd>


<dt><code>type</code></dt>
<dd><p>The file type. If not given it will be inferred</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-Response-status_with_text"></a><div class="section">
<h3 id="method-status-with-text-">Method <code>status_with_text()</code><a class="anchor" aria-label="anchor" href="#method-status-with-text-"></a></h3>
<p>Sets the status to <code>code</code> and sets the body to the
associated status code description (e.g. <code>Bad Gateway</code> for <code>502L</code>)</p><div class="section">
<h4 id="usage-13">Usage<a class="anchor" aria-label="anchor" href="#usage-13"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">Response</span><span class="op">$</span><span class="fu">status_with_text</span><span class="op">(</span><span class="va">code</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-12">Arguments<a class="anchor" aria-label="anchor" href="#arguments-12"></a></h4>
<p></p><div class="arguments"><dl><dt><code>code</code></dt>
<dd><p>The status code to set</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-Response-set_cookie"></a><div class="section">
<h3 id="method-set-cookie-">Method <code>set_cookie()</code><a class="anchor" aria-label="anchor" href="#method-set-cookie-"></a></h3>
<p>Sets a cookie on the response. See
<a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Set-Cookie" class="external-link">https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Set-Cookie</a>
for a longer description</p><div class="section">
<h4 id="usage-14">Usage<a class="anchor" aria-label="anchor" href="#usage-14"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">Response</span><span class="op">$</span><span class="fu">set_cookie</span><span class="op">(</span></span>
<span>  <span class="va">name</span>,</span>
<span>  <span class="va">value</span>,</span>
<span>  encode <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  expires <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  http_only <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  max_age <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  path <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  secure <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  same_site <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-13">Arguments<a class="anchor" aria-label="anchor" href="#arguments-13"></a></h4>
<p></p><div class="arguments"><dl><dt><code>name</code></dt>
<dd><p>The name of the cookie</p></dd>


<dt><code>value</code></dt>
<dd><p>The value of the cookie</p></dd>


<dt><code>encode</code></dt>
<dd><p>Should <code>value</code> be url encoded</p></dd>


<dt><code>expires</code></dt>
<dd><p>A POSIXct object given the expiration time of the cookie</p></dd>


<dt><code>http_only</code></dt>
<dd><p>Should the cookie only be readable by the browser</p></dd>


<dt><code>max_age</code></dt>
<dd><p>The number of seconds to elapse before the cookie expires</p></dd>


<dt><code>path</code></dt>
<dd><p>The URL path this cookie is related to</p></dd>


<dt><code>secure</code></dt>
<dd><p>Should the cookie only be send over https</p></dd>


<dt><code>same_site</code></dt>
<dd><p>Either <code>"Lax"</code> or <code>"Strict"</code> indicating whether the
cookie can be send during cross-site requests</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-Response-remove_cookie"></a><div class="section">
<h3 id="method-remove-cookie-">Method <code>remove_cookie()</code><a class="anchor" aria-label="anchor" href="#method-remove-cookie-"></a></h3>
<p>Removes the cookie named <code>name</code> from the response.</p><div class="section">
<h4 id="usage-15">Usage<a class="anchor" aria-label="anchor" href="#usage-15"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">Response</span><span class="op">$</span><span class="fu">remove_cookie</span><span class="op">(</span><span class="va">name</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-14">Arguments<a class="anchor" aria-label="anchor" href="#arguments-14"></a></h4>
<p></p><div class="arguments"><dl><dt><code>name</code></dt>
<dd><p>The name of the cookie to remove</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-Response-has_cookie"></a><div class="section">
<h3 id="method-has-cookie-">Method <code>has_cookie()</code><a class="anchor" aria-label="anchor" href="#method-has-cookie-"></a></h3>
<p>Queries whether the response contains a cookie named <code>name</code></p><div class="section">
<h4 id="usage-16">Usage<a class="anchor" aria-label="anchor" href="#usage-16"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">Response</span><span class="op">$</span><span class="fu">has_cookie</span><span class="op">(</span><span class="va">name</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-15">Arguments<a class="anchor" aria-label="anchor" href="#arguments-15"></a></h4>
<p></p><div class="arguments"><dl><dt><code>name</code></dt>
<dd><p>The name of the cookie to look for</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-Response-set_links"></a><div class="section">
<h3 id="method-set-links-">Method <code>set_links()</code><a class="anchor" aria-label="anchor" href="#method-set-links-"></a></h3>
<p>Sets the <code>Link</code> header based on the named arguments passed
to <code>...</code>. The names will be used for the <code>rel</code> directive.</p><div class="section">
<h4 id="usage-17">Usage<a class="anchor" aria-label="anchor" href="#usage-17"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">Response</span><span class="op">$</span><span class="fu">set_links</span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-16">Arguments<a class="anchor" aria-label="anchor" href="#arguments-16"></a></h4>
<p></p><div class="arguments"><dl><dt><code>...</code></dt>
<dd><p>key-value pairs for the links</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-Response-format"></a><div class="section">
<h3 id="method-format-">Method <code><a href="https://rdrr.io/r/base/format.html" class="external-link">format()</a></code><a class="anchor" aria-label="anchor" href="#method-format-"></a></h3>
<p>Based on the formatters passed in through <code>...</code> content
negotiation is performed with the request and the preferred formatter is
chosen. The <code>Content-Type</code> header is set automatically. If
<code>compress = TRUE</code> the <code>compress()</code> method will be called after formatting.
If an error is encountered and <code>autofail = TRUE</code> the response will be set
to <code>500</code>. If a formatter is not found and <code>autofail = TRUE</code> the response
will be set to <code>406</code>. If formatting is successful it will return <code>TRUE</code>,
if not it will return <code>FALSE</code></p><div class="section">
<h4 id="usage-18">Usage<a class="anchor" aria-label="anchor" href="#usage-18"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">Response</span><span class="op">$</span><span class="fu">format</span><span class="op">(</span><span class="va">...</span>, autofail <span class="op">=</span> <span class="cn">TRUE</span>, compress <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-17">Arguments<a class="anchor" aria-label="anchor" href="#arguments-17"></a></h4>
<p></p><div class="arguments"><dl><dt><code>...</code></dt>
<dd><p>A range of formatters</p></dd>


<dt><code>autofail</code></dt>
<dd><p>Automatically populate the response if formatting fails</p></dd>


<dt><code>compress</code></dt>
<dd><p>Should <code>$compress()</code> be run in the end</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-Response-compress"></a><div class="section">
<h3 id="method-compress-">Method <code>compress()</code><a class="anchor" aria-label="anchor" href="#method-compress-"></a></h3>
<p>Based on the provided priority, an encoding is negotiated
with the request and applied. The <code>Content-Encoding</code> header is set to the
chosen compression algorithm.</p><div class="section">
<h4 id="usage-19">Usage<a class="anchor" aria-label="anchor" href="#usage-19"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">Response</span><span class="op">$</span><span class="fu">compress</span><span class="op">(</span>priority <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"gzip"</span>, <span class="st">"deflate"</span>, <span class="st">"br"</span>, <span class="st">"identity"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-18">Arguments<a class="anchor" aria-label="anchor" href="#arguments-18"></a></h4>
<p></p><div class="arguments"><dl><dt><code>priority</code></dt>
<dd><p>A vector of compression types ranked by the servers
priority</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-Response-content_length"></a><div class="section">
<h3 id="method-content-length-">Method <code>content_length()</code><a class="anchor" aria-label="anchor" href="#method-content-length-"></a></h3>
<p>Calculates the length (in bytes) of the body. This is the
number that goes into the <code>Content-Length</code> header. Note that the
<code>Content-Length</code> header is set automatically by <code>httpuv</code> so this method
should only be called if the response size is needed for other reasons.</p><div class="section">
<h4 id="usage-20">Usage<a class="anchor" aria-label="anchor" href="#usage-20"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">Response</span><span class="op">$</span><span class="fu">content_length</span><span class="op">(</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-Response-as_list"></a><div class="section">
<h3 id="method-as-list-">Method <code>as_list()</code><a class="anchor" aria-label="anchor" href="#method-as-list-"></a></h3>
<p>Converts the object to a list for further processing by
a Rook compliant server such as <code>httpuv</code>. Will set <code>Content-Type</code> header
if missing and convert a non-raw body to a single character string.</p><div class="section">
<h4 id="usage-21">Usage<a class="anchor" aria-label="anchor" href="#usage-21"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">Response</span><span class="op">$</span><span class="fu">as_list</span><span class="op">(</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-Response-as_message"></a><div class="section">
<h3 id="method-as-message-">Method <code>as_message()</code><a class="anchor" aria-label="anchor" href="#method-as-message-"></a></h3>
<p>Prints a HTTP representation of the response to the output
stream.</p><div class="section">
<h4 id="usage-22">Usage<a class="anchor" aria-label="anchor" href="#usage-22"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">Response</span><span class="op">$</span><span class="fu">as_message</span><span class="op">(</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-Response-clone"></a><div class="section">
<h3 id="method-clone-">Method <code>clone()</code><a class="anchor" aria-label="anchor" href="#method-clone-"></a></h3>
<p>The objects of this class are cloneable with this method.</p><div class="section">
<h4 id="usage-23">Usage<a class="anchor" aria-label="anchor" href="#usage-23"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">Response</span><span class="op">$</span><span class="fu">clone</span><span class="op">(</span>deep <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-19">Arguments<a class="anchor" aria-label="anchor" href="#arguments-19"></a></h4>
<p></p><div class="arguments"><dl><dt><code>deep</code></dt>
<dd><p>Whether to make a deep clone.</p></dd>


</dl><p></p></div>
</div>

</div>

    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">fake_rook</span> <span class="op">&lt;-</span> <span class="fu">fiery</span><span class="fu">::</span><span class="fu"><a href="https://fiery.data-imaginist.com/reference/fake_request.html" class="external-link">fake_request</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="st">'http://example.com/test?id=34632&amp;question=who+is+hadley'</span>,</span></span>
<span class="r-in"><span>  content <span class="op">=</span> <span class="st">'This is elaborate ruse'</span>,</span></span>
<span class="r-in"><span>  headers <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    Accept <span class="op">=</span> <span class="st">'application/json; text/*'</span>,</span></span>
<span class="r-in"><span>    Content_Type <span class="op">=</span> <span class="st">'text/plain'</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">req</span> <span class="op">&lt;-</span> <span class="va"><a href="Request.html">Request</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="va">fake_rook</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">res</span> <span class="op">&lt;-</span> <span class="va">Response</span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="va">req</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">res</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> A HTTP response</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ===============</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         Status: 404 - Not Found</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Content type: text/plain</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> In response to: http://example.com:80/test?id=34632&amp;question=who+is+hadley</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Set the body to the associated status text</span></span></span>
<span class="r-in"><span><span class="va">res</span><span class="op">$</span><span class="fu">status_with_text</span><span class="op">(</span><span class="fl">200L</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">res</span><span class="op">$</span><span class="va">body</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "OK"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Infer Content-Type from file extension</span></span></span>
<span class="r-in"><span><span class="va">res</span><span class="op">$</span><span class="va">type</span> <span class="op">&lt;-</span> <span class="st">'json'</span></span></span>
<span class="r-in"><span><span class="va">res</span><span class="op">$</span><span class="va">type</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "application/json"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Prepare a file for download</span></span></span>
<span class="r-in"><span><span class="va">res</span><span class="op">$</span><span class="kw">attach</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">'DESCRIPTION'</span>, package <span class="op">=</span> <span class="st">'reqres'</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">res</span><span class="op">$</span><span class="va">type</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "text/plain"</span>
<span class="r-in"><span><span class="va">res</span><span class="op">$</span><span class="va">body</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                                 file </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> "/home/runner/work/_temp/Library/reqres/DESCRIPTION" </span>
<span class="r-in"><span><span class="va">res</span><span class="op">$</span><span class="fu">get_header</span><span class="op">(</span><span class="st">'Content-Disposition'</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "attachment; filename=DESCRIPTION"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Cleaning up connections</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/rm.html" class="external-link">rm</a></span><span class="op">(</span><span class="va">fake_rook</span>, <span class="va">req</span>, <span class="va">res</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/gc.html" class="external-link">gc</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           used (Mb) gc trigger  (Mb) max used  (Mb)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Ncells 1081232 57.8    2206058 117.9  2206058 117.9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Vcells 2025407 15.5    8388608  64.0  2809226  21.5</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by <a href="https://data-imaginist.com" class="external-link">Thomas Lin Pedersen</a>.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

      </footer></div>






  </body></html>

